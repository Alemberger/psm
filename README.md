# Provider Screening Module Page

This is the project home page for the open source Provider Screening Module (PSM). The site is built with Jekyll and deployed on GitHub Pages at [projectpsm.org](projectpsm.org).

## Dashboard Setup

The files for the front end of the PSM project dashboard live here in the `dashboard` directory (JS, JSON, CSS, and HTML files).  The data for the dashboard is in the `features-info.json` file, which is generated by scripts in the [psm-dashboard](https://github.com/SolutionGuidance/psm-dashboard) repo, and is checked in here whenever it is regenerated. (Previously all the dashboard files lived in the `psm-dashboard` repo.)

Unlike the other pages in this site, the dashboard page is not modified by `jekyll`. (Note that `dashboard/index.html` has no YAML frontmatter, but is a plain HTML file.)  Instead `jekyll` simply copies all the files from the `dashboard` directory to the `_site` directory. So the dashboard page will need to be updated manually when changes are made to, for example, the navigation links in the site header.

## Development Quick Start Guide

Use `$ jekyll build` to generate the static site in the `_site` directory.  Then if you just open up the generated files in your browser, there will likely be cross-origin errors and other issues. To avoid this (on Linux), run the following line in the `_site` directory to spin up a local server and view the site that way.

`$ python3 -m http.server`

## Development guidelines

We're pretty loose here right now.  A few things:

1. Use conventional indentation (spaces not tabs; 2 spaces per level for
   Javascript).

2. Feel free to use branches and PRs, but it's okay to push directly
   to master too.

3. Please don't load Javascript directly from other servers; instead,
   copy the exact version you need of an upstream library to the
   `dashboard/upstream-js/` subdirectory, including both the minified version
   and the corresponding non-minified version, and update
   `dashboard/upstream-js/README.md` accordingly.  Everything the dashboard
   needs should be available locally, so that if some foreign server
   goes down our dashboard keeps working.

## What's here.

* `index.html`
  Browser entry point to the dashboard.

* `burn-down.js`, `dashboard.js`, `features-pie-chart.js`
  JavaScript code used by the dashboard page.

* `dashboard.css`
  CSS code for the dashboard page.

* `features-info.json`
  Input data for the dashboard display code.

  Generated by running scripts in the `psm-dashboard` repo.  This is
  a generated file and therefore in theory we shouldn't version it.
  But in practice: it's rather expensive to generate, so once we have a
  new version we like to keep it until the next time we regenerate.

* `upstream-js` directory
  Third party JavaScript libraries used by the dashboard.
